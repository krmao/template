apply plugin: "com.android.library"
apply plugin: "kotlin-android"
apply plugin: "kotlin-android-extensions"

android {
    compileSdkVersion = rootProject.ext.compileSdkVersion
    buildToolsVersion = rootProject.ext.buildToolsVersion
    ndkVersion = "21.3.6528147"

    defaultConfig {
        minSdkVersion rootProject.ext.minSdkVersion
        targetSdkVersion rootProject.ext.targetSdkVersion

        externalNativeBuild {
            cmake {
                cppFlags ""
                abiFilters 'armeabi-v7a', 'x86', 'x86_64', 'arm64-v8a'
            }
        }
    }

    externalNativeBuild {
        cmake {
            path "src/main/cpp/CMakeLists.txt"
            version "3.10.2"
        }
    }

    resourcePrefix "st_"
}

dependencies {
    api fileTree(dir: "libs", include: ["*.jar"])

    /******* 官方支持库 ****************************************************************************/
    api "androidx.core:core-ktx:$rootProject.ext.androidXCoreVersion"
    api "androidx.fragment:fragment-ktx:$rootProject.ext.androidXFragmentVersion"
    api "androidx.fragment:fragment:$rootProject.ext.androidXFragmentVersion"
    api "androidx.viewpager:viewpager:$rootProject.ext.androidXVersion"
    api "androidx.legacy:legacy-support-v4:$rootProject.ext.androidXVersion"
    api "androidx.appcompat:appcompat:$rootProject.ext.androidXAppCompatVersion"
    api "androidx.annotation:annotation:$rootProject.ext.androidXAnnotationVersion"
    api "androidx.constraintlayout:constraintlayout:$rootProject.ext.androidXConstraintlayoutVersion"
    api "androidx.recyclerview:recyclerview:$rootProject.ext.androidXRecyclerViewVersion"
    api "androidx.recyclerview:recyclerview-selection:$rootProject.ext.androidXVersion"
    api "com.google.android.material:material:$rootProject.ext.androidXMaterialVersion"
    api "androidx.cardview:cardview:$rootProject.ext.androidXVersion"
    api "androidx.vectordrawable:vectordrawable-animated:$rootProject.ext.androidXVectorDrawableVersion"
    api "androidx.multidex:multidex:$rootProject.ext.androidXMultidexVersion"

    /******* kotlin支持 ***************************************************************************/
    api "org.jetbrains.kotlin:kotlin-stdlib:$rootProject.ext.kotlinVersion"
    api "org.jetbrains.kotlin:kotlin-reflect:$rootProject.ext.kotlinVersion"
    api "org.jetbrains.anko:anko-common:$rootProject.ext.ankoVersion"

    /******* 必备工具库 ****************************************************************************/
    api "io.reactivex.rxjava2:rxjava:$rootProject.ext.rxjavaVersion"    //1.3MB [EventBus]
    api "io.reactivex.rxjava2:rxkotlin:$rootProject.ext.rxkotlinVersion"
    api "io.reactivex.rxjava2:rxandroid:$rootProject.ext.rxandroidVersion" //8KB
    api "com.jakewharton.rxbinding2:rxbinding-kotlin:$rootProject.ext.rxbindingVersion"
    api "com.jakewharton.rxbinding2:rxbinding-design-kotlin:$rootProject.ext.rxbindingVersion"
    api "com.jakewharton.rxbinding2:rxbinding-support-v4-kotlin:$rootProject.ext.rxbindingVersion"
    api "com.jakewharton.rxbinding2:rxbinding-appcompat-v7-kotlin:$rootProject.ext.rxbindingVersion"
    api "com.jakewharton.rxbinding2:rxbinding-recyclerview-v7-kotlin:$rootProject.ext.rxbindingVersion"

    /******* 网络请求库 ****************************************************************************/
    api "com.squareup.okhttp3:okhttp:$rootProject.ext.okhttpVersion"
    api "com.squareup.retrofit2:retrofit:$rootProject.ext.retrofitVersion"
    api "com.squareup.retrofit2:adapter-rxjava2:$rootProject.ext.retrofitVersion"
    api "com.squareup.retrofit2:converter-gson:$rootProject.ext.retrofitVersion"
    // api "com.squareup.okhttp3:logging-interceptor:$rootProject.ext.okhttpVersion" //STHttpLoggingInterceptor
    // api "org.ligboy.retrofit2:converter-fastjson-android:$rootProject.ext.converterfastjsonandroidVersion"
    // api "com.squareup.retrofit2:converter-jackson:$rootProject.ext.retrofitVersion"

    /******* 网络图片库 ****************************************************************************/
    if (gradle.ext.modules.reactNative.enable == true) {
        compileOnly "com.facebook.fresco:fresco:$rootProject.ext.frescoVersion"
        compileOnly "com.facebook.fresco:imagepipeline-okhttp3:$rootProject.ext.frescoVersion"
    } else {
        api "com.facebook.fresco:fresco:$rootProject.ext.frescoVersion"
        api "com.facebook.fresco:imagepipeline-okhttp3:$rootProject.ext.frescoVersion"
    }
    /******* 其它常用库 ****************************************************************************/
    api "com.jude:swipebackhelper:3.1.2"
    api "com.gyf.immersionbar:immersionbar:2.3.1" // 沉浸式状态栏
    api "com.andkulikov:transitionseverywhere:1.7.8"
    api "com.davemorrissey.labs:subsampling-scale-image-view:3.10.0"

    api "com.scwang.smart:refresh-layout-kernel:$rootProject.ext.smartRefreshLayoutVersion" // https://github.com/scwang90/SmartRefreshLayout
    api "com.scwang.smart:refresh-header-classics:$rootProject.ext.smartRefreshLayoutVersion" //经典刷新头
    api "com.scwang.smart:refresh-footer-classics:$rootProject.ext.smartRefreshLayoutVersion"  //经典加载

    api "com.airbnb.android:lottie:3.2.2"

    api(name: "bspatch-0.0.2", ext: "aar")
    // api "com.smart.library.util:bspatch:0.0.2"
    // api "org.greenrobot:greendao:$rootProject.ext.greendaoVersion"
    // api "com.google.guava:guava:$rootProject.ext.guavaVersion"  //1.5MB
    // api "com.liaoinstan.springview:library:1.3.2"
    // https://github.com/davemorrissey/subsampling-scale-image-view
}

/*apply plugin: "maven"

group = "com.smart.android"
def artifactID = "library-base"
version = rootProject.ext.libraryBaseVersion

uploadArchives {
    repositories {
        mavenDeployer {
            snapshotRepository(url: "") {
                authentication(userName: "", password: "")
            }
            repository(url: rootProject.ext.prepository_url) {
                authentication(userName: "", password: "")
            }
            pom.packaging = "aar"
            pom.groupId = project.group
            pom.artifactId = artifactID
            pom.version = project.version
        }
    }
}*/
