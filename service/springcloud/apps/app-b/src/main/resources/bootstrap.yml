# https://stackoverflow.com/a/29194250/4348530
debug: true

server:
    port: 5381 # http://localhost:5381/app-b/test/remoteConfig http://localhost:5386/apps-app-b-dev.yml
    servlet:
        context-path: /app-b
spring:
    application:
        name: APP-B
        #    config:
        #        name: APP-B
        #    profiles:
        # /{application}/{profile}[/{label}]
        # /{application}-{profile}.yml
        # /{application}-{profile}.properties
        # /{label}/{application}-{profile}.properties
    #        active: dev # http://localhost:5386/APP-B/dev http://localhost:5386/APP-B-dev.yml http://localhost:5386/APP-B/dev/master http://localhost:5386/master/APP-B-dev.yml
    cloud:
        config:
            # You can override all of them by setting spring.cloud.config.* (where * is name, profile or label).
            # /{name}/{profile}/{label} http://localhost:5386/APP-B/dev/master
            # https://cloud.spring.io/spring-cloud-static/spring-cloud-config/2.0.1.RELEASE/single/spring-cloud-config.html#_locating_remote_configuration_resources
            label: master # 配置仓库的分支
            profile: dev  # 环境 env
            # name: APP-B   # 注意此属性将覆盖spring.application.name，若两者不一致则会导致不能从config-server读取PropertySources
            # name: apps-app-b   # Name of application used to fetch remote properties.

            discovery:  # 配置服务发现
                enabled: true
                serviceId: CONFIG-SERVER

            uri: http://localhost:8888/

            # enabled: true
            # username: # HTTP Basic security
            # password: # HTTP Basic security
            # allow-override: true
            # override-none: true
            # override-system-properties: true
            # fail-fast: false

            # server:
            # bootstrap: true

eureka:
    client:
        service-url:
            # eureka-server address
            defaultZone: http://10.32.33.21:5388/eureka
        register-with-eureka: true
        fetch-registry: true
    instance:
        hostname: ${spring.cloud.client.ip-address}
        prefer-ip-address: true
        # https://www.jianshu.com/p/5ad8317961b7
        # https://stackoverflow.com/a/29194250/4348530
        instance-id: ${spring.cloud.client.ip-address}:${server.port}${server.servlet.context-path}

# TRACE, DEBUG, INFO, WARN, ERROR, FATAL, OFF
logging:
    level:
        root: TRACE
        com.smart: TRACE
        static: TRACE
        org.springframework:
            autoconfigure: TRACE
            data: TRACE
            security: TRACE

# testName: kr.maom # 经测试放在 application.yml 不生效
